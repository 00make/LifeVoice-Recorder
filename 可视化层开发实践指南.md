# LifeOS Command Deck Implementation Guide

本指南指导如何构建一个 **Strategic Visualization Interface** (战略可视化界面)。

## 1. 技术栈建议 (Monitoring Stack)

- **Frontend**: Next.js + ShadcnUI.
- **Graph Viz**: `react-force-graph` (用于 3D/2D 知识图谱) 或 `React Flow` (用于 Pipeline View).
- **Backend**: Python FastAPI (Wrapper around Neo4j).

## 2. 核心视图实现

### 2.1 资源视图 (The Library View - Knowledge Graph)

**Data Source**: Neo4j (`GET /graph/active`).
**Component**: `react-force-graph`.
- **Node Colors**:
  - Blue: `Idea`
  - Red: `Action/SOP`
  - Green: `Asset`
  - Grey: `Context`
- **Interaction**: 点击 Node 展开 Sidebar 显示详细 properties (SOP 内容或 Asset 链接)。

### 2.2 执行视图 (The Pipeline View - Kanban/Gantt)

**Data Source**: `LangSmith` API 或内部 `task_queue` 表。
**Component**: 自研 Kanban Board.
- **Columns**: `Pending Trigger`, `Running (Worker)`, `In Review (Critic)`, `Done`.
- **Cards**: 显示 Task ID, 所属 SOP, 当前 Step。

### 2.3 仪表盘视图 (The Dashboard - Gauges)

**Data Source**: Real-time Context API (`GET /context/current`).
- **Widgets**:
  - **Energy Gauge**: 显示 Bio-Context 中的 Energy Level.
  - **Focus Timer**: 当前 Focus Mode 剩余时间.

### 2.4 审批流 (Approval Workflow)

在界面实现一个 `Notification Center`：
1. 轮询 Backend 的 `pending_approvals` 队列。
2. 渲染 Card: "Writer Agent 申请发布博客至 Hugo"。
3. Action: [Approve] / [Reject] / [Edit Request]。

## 3. 数据源聚合

- **PostgreSQL**: 读取历史 Insight 和 Timeline。
- **Redis Pub/Sub**: 订阅实时 Agent 状态流 (用于 WebSocket 推送)。

## 4. 关键指标 (UX Metrics)

- **Latency**: Agent 状态更新必须 < 200ms (WebSocket)。
- **Clarity**: 即使有 50 个并发 Agent，也能通过折叠/聚合清晰展示。
